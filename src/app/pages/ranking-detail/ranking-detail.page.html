<ion-content [fullscreen]="true" #scrollarea no-bounce  class="bg-transparent">
  <!-- <ion-header> -->
  <div class="safe-area"></div>
  <!-- <ion-header class="ion-no-border safe-area"> </ion-header> -->

  <ion-fab vertical="top" horizontal="start" slot="fixed">
    <ion-button
      (click)="goBack()"
      type="button"
      size="default"
      shape="circle"
      color="primary"
    >
      <ion-icon name="chevron-back-outline"></ion-icon>
    </ion-button>
  </ion-fab>

  <!-- <ion-toolbar color="primary" style="--border-width:0;"> -->
    <!-- <ion-list style="background-color: transparent;">
      <ion-item class="name" lines="none" color="none">
        {{title}}
      </ion-item>
      <ion-item lines="none" color="none">
        <ion-text>Omni Score&nbsp;{{athlete.omniScore | number}}</ion-text>
      </ion-item>
    </ion-list> -->
    <!-- <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon name="close-circle-outline" size="large"></ion-icon>
      </ion-button>
    </ion-buttons> -->
  <!-- </ion-toolbar> -->

  <!-- <ion-item *ngIf="showChart" lines="none" color="primary">
    <app-category-chart [user]="athlete"></app-category-chart>
  </ion-item>
  <ion-item lines="none" color="primary">
    <ion-button
      class="more-button"
      color="none"
      [ngClass]="showChart ? 'rotate-button' : ''"
      (click)="toggleChart($event)"
      ><ion-icon name="chevron-down"></ion-icon
    ></ion-button>
  </ion-item> -->

<!-- </ion-header> -->

  <ng-container *ngIf="{
    athlete: athlete$ | async,
    categories: categories$ | async,
    assessments: assessments$ | async,
  } as data; else loading">

    <app-profile-header [athlete$]="athlete$"></app-profile-header>

    <ion-card class="bg-transparent" style="box-shadow: none; margin-bottom: 0">
      <ion-item lines="none">
        <ion-card-title>All Assessments</ion-card-title>
      </ion-item>

      <ng-container *ngFor="let category of data.categories">
        <ion-item class="cat-header" lines="none">
          <ion-text>
            <!-- {{category.label}}: {{getCategoryScore(category.cid)}} -->
            {{category.label}}: {{data.athlete?.categoryScore[category.cid]}}
          </ion-text>
        </ion-item>
        <ng-container *ngFor="let assessment of getCategoryAssessments(data.assessments, category.cid)">
          <ion-item lines="none" style="--inner-border-width: 0">
            <ion-thumbnail slot="start">
              <ion-img
                class="fit-thumbnail"
                src="{{assessment.icon}}"
              ></ion-img>
            </ion-thumbnail>
            <ion-label>{{assessment.label}}</ion-label>
            <div slot="end">
              <span class="units">{{assessment.units}}</span>
              <br />
              <ng-container *ngIf="getScore(assessment.aid) as score; else zeroScore">
                <ion-badge
                  class="score"
                  ngClass="{{scoreClass(score['scoreDate'])}}"
                  slot="end"
                  >{{score['rawScore']}}</ion-badge
                >
              </ng-container>
              <ng-template #zeroScore>
                <ion-badge class="score" slot="end">0</ion-badge>
              </ng-template>
            </div>
          </ion-item>
        </ng-container>
      </ng-container>

    </ion-card>
  </ng-container>
  <ng-template #loading>Loading...</ng-template>
  <div class="bottom-padding"></div>
</ion-content>
